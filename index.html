<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pendaftaran PDP KESAN Kab. Sinjai</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom Styles & Animations */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
        }
        .form-container {
            transition: all 0.5s ease-in-out;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .form-step {
            display: none;
        }
        .form-step.active {
            display: block;
            animation: fadeIn 0.6s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .progress-bar-inner {
            transition: width 0.5s ease-in-out;
        }
        .btn-primary {
            background: linear-gradient(135deg, #2563eb, #3b82f6);
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);
        }
        .input-field {
            border-color: #d1d5db;
            transition: all 0.3s ease;
        }
        .input-field:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
            outline: none;
        }
        .input-error {
            border-color: #ef4444;
        }
        .brand-text {
            background: linear-gradient(135deg, #16a34a, #2563eb, #dc2626);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="form-container bg-white rounded-2xl w-full max-w-2xl p-6 md:p-10">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800">Formulir Pendaftaran Calon Peserta</h1>
            <h2 class="text-xl md:text-2xl font-semibold brand-text">Pendidikan Dasar Pancasila</h2>
            <p class="text-gray-500 mt-2">DPC Kebangkitan Siswa Nusantara (KESAN) Kab. Sinjai</p>
        </div>

        <!-- Progress Bar -->
        <div class="mb-8">
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div id="progressBar" class="bg-blue-600 h-2.5 rounded-full progress-bar-inner" style="width: 25%"></div>
            </div>
            <div id="stepIndicator" class="text-center text-sm text-gray-600 mt-2">Langkah 1 dari 4</div>
        </div>

        <!-- Form Steps -->
        <form id="registrationForm" onsubmit="return false;">
            <!-- Step 1: Data Diri -->
            <div id="step-1" class="form-step active">
                <h3 class="text-lg font-semibold mb-4 text-gray-700">1. Data Diri</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="text" id="nama" placeholder="Nama Lengkap" class="input-field w-full p-3 rounded-lg" required>
                    <input type="text" id="tempatLahir" placeholder="Tempat Lahir" class="input-field w-full p-3 rounded-lg" required>
                    <input type="date" id="tglLahir" placeholder="Tanggal Lahir" class="input-field w-full p-3 rounded-lg text-gray-500" required>
                    <select id="agama" class="input-field w-full p-3 rounded-lg text-gray-500" required>
                        <option value="" disabled selected>Pilih Agama</option>
                        <option value="Islam">Islam</option>
                        <option value="Kristen Protestan">Kristen Protestan</option>
                        <option value="Katolik">Katolik</option>
                        <option value="Hindu">Hindu</option>
                        <option value="Buddha">Buddha</option>
                        <option value="Khonghucu">Khonghucu</option>
                    </select>
                </div>
                 <div class="mt-4">
                    <p class="text-gray-600 mb-2">Jenis Kelamin:</p>
                    <div class="flex gap-4">
                        <label class="flex items-center">
                            <input type="radio" name="jenisKelamin" value="Laki-laki" class="mr-2" required> Laki-laki
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="jenisKelamin" value="Perempuan" class="mr-2" required> Perempuan
                        </label>
                    </div>
                </div>
                <div class="flex justify-end mt-6">
                    <button type="button" onclick="nextStep(2)" class="btn-primary text-white font-bold py-2 px-6 rounded-lg">Lanjut</button>
                </div>
            </div>

            <!-- Step 2: Alamat & Sekolah -->
            <div id="step-2" class="form-step">
                <h3 class="text-lg font-semibold mb-4 text-gray-700">2. Alamat & Pendidikan</h3>
                <div class="grid grid-cols-1 gap-4">
                    <textarea id="alamat" placeholder="Alamat Lengkap (Jl, Desa/Kel, Kec, Kab)" class="input-field w-full p-3 rounded-lg" rows="3" required></textarea>
                    <input type="text" id="asalSekolah" placeholder="Asal Sekolah" class="input-field w-full p-3 rounded-lg" required>
                    <input type="text" id="kelas" placeholder="Kelas (Contoh: XI MIPA 1)" class="input-field w-full p-3 rounded-lg" required>
                </div>
                <div class="flex justify-between mt-6">
                    <button type="button" onclick="prevStep(1)" class="bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-lg">Kembali</button>
                    <button type="button" onclick="nextStep(3)" class="btn-primary text-white font-bold py-2 px-6 rounded-lg">Lanjut</button>
                </div>
            </div>

            <!-- Step 3: Kontak & Motivasi -->
            <div id="step-3" class="form-step">
                <h3 class="text-lg font-semibold mb-4 text-gray-700">3. Kontak & Motivasi</h3>
                <div class="grid grid-cols-1 gap-4">
                     <input type="tel" id="noHp" placeholder="Nomor HP/WA Aktif (Contoh: 08xxxxxxxx)" class="input-field w-full p-3 rounded-lg" required>
                     <input type="email" id="email" placeholder="Alamat Email (Opsional)" class="input-field w-full p-3 rounded-lg">
                     <textarea id="motivasi" placeholder="Apa motivasi Anda mengikuti PDP KESAN?" class="input-field w-full p-3 rounded-lg" rows="4" required></textarea>
                </div>
                <div class="flex justify-between mt-6">
                    <button type="button" onclick="prevStep(2)" class="bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-lg">Kembali</button>
                    <button type="button" onclick="nextStep(4)" class="btn-primary text-white font-bold py-2 px-6 rounded-lg">Lanjut</button>
                </div>
            </div>
            
            <!-- Step 4: Konfirmasi -->
            <div id="step-4" class="form-step">
                <h3 class="text-lg font-semibold mb-4 text-gray-700">4. Konfirmasi Data</h3>
                <p class="text-gray-600 mb-4">Mohon periksa kembali data yang telah Anda isi. Pastikan semua informasi sudah benar sebelum mengirim.</p>
                <div id="summary" class="bg-gray-50 p-4 rounded-lg space-y-2 text-gray-800"></div>
                <div class="flex justify-between mt-6">
                    <button type="button" onclick="prevStep(3)" class="bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-lg">Kembali</button>
                    <button type="button" onclick="submitToWhatsapp()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-whatsapp" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/></svg>
                        Kirim Pendaftaran
                    </button>
                </div>
            </div>
        </form>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 4;
        const progressBar = document.getElementById('progressBar');
        const stepIndicator = document.getElementById('stepIndicator');

        function updateProgress() {
            progressBar.style.width = `${(currentStep / totalSteps) * 100}%`;
            stepIndicator.textContent = `Langkah ${currentStep} dari ${totalSteps}`;
        }

        function showStep(stepNumber) {
            document.querySelectorAll('.form-step').forEach(step => {
                step.classList.remove('active');
            });
            document.getElementById(`step-${stepNumber}`).classList.add('active');
            currentStep = stepNumber;
            updateProgress();
        }

        function validateStep(stepNumber) {
            const stepDiv = document.getElementById(`step-${stepNumber}`);
            const inputs = stepDiv.querySelectorAll('input[required], select[required], textarea[required]');
            let isValid = true;
            inputs.forEach(input => {
                // Check radio buttons separately
                if (input.type === 'radio') {
                    const radioGroup = stepDiv.querySelectorAll(`input[name="${input.name}"]`);
                    if (![...radioGroup].some(r => r.checked)) {
                        isValid = false;
                        // You could add a visual indicator for the radio group label here
                    }
                } else if (!input.value.trim()) {
                    isValid = false;
                    input.classList.add('input-error');
                } else {
                    input.classList.remove('input-error');
                }
            });
            return isValid;
        }

        function nextStep(stepNumber) {
            if (validateStep(currentStep)) {
                if (stepNumber === 4) {
                    displaySummary();
                }
                showStep(stepNumber);
            } else {
                alert('Mohon lengkapi semua data yang wajib diisi.');
            }
        }

        function prevStep(stepNumber) {
            showStep(stepNumber);
        }
        
        function getFormData() {
            const formData = {};
            formData.nama = document.getElementById('nama').value;
            formData.tempatLahir = document.getElementById('tempatLahir').value;
            const tglLahirValue = document.getElementById('tglLahir').value;
            if (tglLahirValue) {
                const [year, month, day] = tglLahirValue.split('-');
                formData.tglLahir = `${day}-${month}-${year}`;
            } else {
                formData.tglLahir = '';
            }
            formData.agama = document.getElementById('agama').value;
            const jenisKelaminRadio = document.querySelector('input[name="jenisKelamin"]:checked');
            formData.jenisKelamin = jenisKelaminRadio ? jenisKelaminRadio.value : 'Belum diisi';
            formData.alamat = document.getElementById('alamat').value;
            formData.asalSekolah = document.getElementById('asalSekolah').value;
            formData.kelas = document.getElementById('kelas').value;
            formData.noHp = document.getElementById('noHp').value;
            formData.email = document.getElementById('email').value || 'Tidak diisi';
            formData.motivasi = document.getElementById('motivasi').value;
            return formData;
        }

        function displaySummary() {
            const data = getFormData();
            const summaryDiv = document.getElementById('summary');
            summaryDiv.innerHTML = `
                <p><strong>Nama:</strong> ${data.nama}</p>
                <p><strong>Tempat, Tgl Lahir:</strong> ${data.tempatLahir}, ${data.tglLahir}</p>
                <p><strong>Jenis Kelamin:</strong> ${data.jenisKelamin}</p>
                <p><strong>Agama:</strong> ${data.agama}</p>
                <p><strong>Alamat:</strong> ${data.alamat}</p>
                <p><strong>Asal Sekolah:</strong> ${data.asalSekolah} (Kelas: ${data.kelas})</p>
                <p><strong>No. HP/WA:</strong> ${data.noHp}</p>
                <p><strong>Email:</strong> ${data.email}</p>
                <p><strong>Motivasi:</strong> ${data.motivasi}</p>
            `;
        }

        function submitToWhatsapp() {
            if (!validateStep(1) || !validateStep(2) || !validateStep(3)) {
                 alert('Sepertinya ada data yang belum lengkap. Silakan kembali dan periksa lagi.');
                 return;
            }
            
            const data = getFormData();
            const nomorTujuan = "6287731949761";

            // Formatting the message
            const message = `
Assalamualaikum, Kak. Saya ingin mendaftar sebagai Calon Peserta Pendidikan Dasar Pancasila (PDP) DPC KESAN Kab. Sinjai.

Berikut adalah data diri saya:

*DATA DIRI*
- Nama Lengkap: *${data.nama}*
- Tempat, Tgl Lahir: *${data.tempatLahir}, ${data.tglLahir}*
- Jenis Kelamin: *${data.jenisKelamin}*
- Agama: *${data.agama}*
- Alamat Lengkap: *${data.alamat}*

*PENDIDIKAN*
- Asal Sekolah: *${data.asalSekolah}*
- Kelas: *${data.kelas}*

*KONTAK*
- No. HP/WA: *${data.noHp}*
- Email: *${data.email}*

*MOTIVASI*
_"${data.motivasi}"_

Terima kasih.
            `;

            const encodedMessage = encodeURIComponent(message.trim());
            const whatsappUrl = `https://wa.me/${nomorTujuan}?text=${encodedMessage}`;

            // Redirect to WhatsApp
            window.open(whatsappUrl, '_blank');
        }
    </script>
</body>
</html>

